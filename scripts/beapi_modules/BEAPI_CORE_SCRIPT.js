var lt=Object.defineProperty,Xt=Object.defineProperties,Yt=Object.getOwnPropertyDescriptor,Qt=Object.getOwnPropertyDescriptors;var at=Object.getOwnPropertySymbols;var Zt=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable;var Re=(l,e,i)=>e in l?lt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):l[e]=i,E=(l,e)=>{for(var i in e||(e={}))Zt.call(e,i)&&Re(l,i,e[i]);if(at)for(var i of at(e))Vt.call(e,i)&&Re(l,i,e[i]);return l},ct=(l,e)=>Xt(l,Qt(e));var o=(l,e,i,r)=>{for(var n=r>1?void 0:r?Yt(e,i):e,m=l.length-1,u;m>=0;m--)(u=l[m])&&(n=(r?u(e,i,n):u(n))||n);return r&&n&&lt(e,i,n),n};var t=(l,e,i)=>(Re(l,typeof e!="symbol"?e+"":e,i),i);var Fe=class{constructor(e=50){t(this,"_listeners",new Map);t(this,"max");t(this,"getMaxListeners",()=>this.max);this.max=e}static get[Symbol.toStringTag](){return"[undefined EventEmitter]"}static get[Symbol.name](){return"EventEmitter"}get[Symbol.toStringTag](){return"[object EventEmitter]"}get[Symbol.name](){return"EventEmitter"}static toString(){return"[undefined EventEmitter]"}toString(){return"[object EventEmitter]"}addListener(e,i){var r;this._listeners.size>=this.max&&console.warn(`warning: possible EventEmitter memory leak detected. ${this._listeners.size} listeners registered.`),this._listeners.set(e,[...(r=this._listeners.get(e))!=null?r:[],i])}removeListener(e,i){let r=this._listeners.get(e);r==null||r.splice(r==null?void 0:r.indexOf(i))}removeListeners(e){this._listeners.delete(e)}removeAllListeners(){this._listeners.clear()}envokeEvent(e,...i){var r;(r=this._listeners.get(e))==null||r.forEach(n=>{n(...i)})}listeners(e){return this._listeners.get(e)}listenerCount(e){var i,r;return(r=(i=this._listeners.get(e))==null?void 0:i.length)!=null?r:0}setMaxListeners(e){this.max=e}on(e,i){this.addListener(e,i)}off(e,i){this.removeListener(e,i)}emit(e,...i){this.envokeEvent(e,...i)}once(e,i){let r=(...n)=>{i(...n),this.removeListener(e,r)};this.addListener(e,r)}};var p=class{};import{world as mt}from"mojang-minecraft";var I=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","OnChat");t(this,"iName","beforeChat");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(mt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(mt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=e.sender.name?this._client.players.getByName(e.sender.name):this._client.players.getByNameTag(e.sender.nameTag);!i||(i.isMuted()&&(e.cancel=!0),this._client.emit(this.name,{sender:i,message:e.message,cancel(){e.cancel=!0}}))}};o([s("OnChat")],I.prototype,"name",2),o([s("beforeChat")],I.prototype,"iName",2);import{world as pt}from"mojang-minecraft";var P=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","OnJoin");t(this,"iName","playerJoin");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(pt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(pt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.players.create(e.player);this._client.players.add(i),this._client.emit(this.name,i)}};o([s("OnJoin")],P.prototype,"name",2),o([s("playerJoin")],P.prototype,"iName",2);import{world as dt}from"mojang-minecraft";var T=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","OnLeave");t(this,"iName","playerLeave");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(dt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(dt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.players.getByName(e.playerName);!i||(this._client.emit(this.name,i),this._client.players.remove(i))}};o([s("OnLeave")],T.prototype,"name",2),o([s("playerLeave")],T.prototype,"iName",2);import{world as yt}from"mojang-minecraft";import{MinecraftEnchantmentTypes as Ae,Enchantment as ei}from"mojang-minecraft";var b=class{constructor(e,i){t(this,"_client");t(this,"_IItem");this._client=e,this._IItem=i}getIItem(){return this._IItem}getId(){return this._IItem.id}getAmount(){return this._IItem.amount}getData(){return this._IItem.data}getNameTag(){return this._IItem.nameTag}setNameTag(e){this._IItem.nameTag=e}getLore(){return this._IItem.getLore()}hasLore(e){return!!this.getLore().find(i=>i===e)}setLore(e){this._IItem.setLore(e)}triggerEvent(e){this._IItem.triggerEvent(e)}getComponents(){return this._IItem.getComponents()}hasComponent(e){return this._IItem.hasComponent(e)}getComponent(e){return this._IItem.getComponent(e)}getEnchantments(){return ut(this._IItem)}addEnchantment(e,i){if(!this.hasComponent("minecraft:enchantments"))return!1;let r=this._IItem.getComponent("minecraft:enchantments"),n=r.enchantments,m=n.addEnchantment(new ei(Ae[e],i));return r.enchantments=n,m}removeEnchantment(e){if(!this.hasComponent("minecraft:enchantments")||!this.hasEnchantment(e))return!1;let i=this._IItem.getComponent("minecraft:enchantments"),r=i.enchantments;return r.removeEnchantment(Ae[e]),i.enchantments=r,!0}hasEnchantment(e){return this.hasComponent("minecraft:enchantments")?this._IItem.getComponent("minecraft:enchantments").enchantments.hasEnchantment(Ae[e])!==0:!1}getEnchantment(e){return!this.hasComponent("minecraft:enchantments")||!this.hasEnchantment(e)?void 0:this._IItem.getComponent("minecraft:enchantments").enchantments.getEnchantment(Ae[e])}setInSlot(e,i){i.setItem(e,this)}};var w=class{constructor(e,i){t(this,"_client");t(this,"_IInventory");t(this,"_IContainer");this._client=e,this._IInventory=i,this._IContainer=i.container}getIInventory(){return this._IInventory}getIContainer(){return this._IContainer}getSize(){return this._IContainer.size}getEmptySlots(){return this._IContainer.emptySlotsCount}getItem(e){return new b(this._client,this._IContainer.getItem(e))}setItem(e,i){return this._IContainer.setItem(e,i.getIItem())}addItem(e){return this._IContainer.addItem(e.getIItem())}transferItem(e,i,r){return this._IContainer.swapItems(e,i,r.getIContainer())}swapItem(e,i){return this._IContainer.transferItem(e,i,this._IContainer)}};var je=class{constructor(e,i){t(this,"_client");t(this,"_IInventory");t(this,"_IContainer");this._client=e,this._IInventory=i,this._IContainer=i.container}getIInventory(){return this._IInventory}getIContainer(){return this._IContainer}getSize(){return this._IContainer.size}getEmptySlots(){return this._IContainer.emptySlotsCount}getItem(e){return new b(this._client,this._IContainer.getItem(e))}setItem(e,i){return this._IContainer.setItem(e,i.getIItem())}addItem(e){return this._IContainer.addItem(e.getIItem())}transferItem(e,i,r){return this._IContainer.swapItems(e,i,r.getIContainer())}swapItem(e,i){return this._IContainer.transferItem(e,i,this._IContainer)}};var h=class{constructor(e,i){t(this,"_client");t(this,"_IBlock");this._client=e,this._IBlock=i}getIBlock(){return this._IBlock}getId(){return this._IBlock.id}getType(){return new k(this._client,this._IBlock.type)}setType(e){this._IBlock.setType(e.getIBlockType())}getPermutation(){return new S(this._client,this._IBlock.permutation)}setPermutation(e){this._IBlock.setPermutation(e.getIPermutation())}getDimension(){return this._IBlock.dimension}getDimensionName(){return this.getDimension().id.split(":")[1].replace(/_/g," ")}getLocation(){let e=this._IBlock.location;return{x:Math.floor(e.x),y:Math.floor(e.y),z:Math.floor(e.z)}}getPreciseLocation(){let e=this._IBlock.location;return{x:e.x,y:e.y,z:e.z}}isEmpty(){return this._IBlock.isEmpty}isWaterLogged(){return this._IBlock.isWaterlogged}getTags(){return this._IBlock.getTags()}hasTag(e){return this._IBlock.hasTag(e)}getComponent(e){return this._IBlock.getComponent(e)}hasComponent(e){return this.getComponent(e)!==null}getInventory(){if(!!this.getComponent("inventory"))return new je(this._client,this._IBlock.getComponent("inventory"))}};var k=class{constructor(e,i){t(this,"_client");t(this,"_IBlockType");this._client=e,this._IBlockType=i}getIBlockType(){return this._IBlockType}getId(){return this._IBlockType.id}canBeWaterLogged(){return this._IBlockType.canBeWaterlogged}createPermutation(){return this._IBlockType.createDefaultBlockPermutation()}};var S=class{constructor(e,i){t(this,"_client");t(this,"_IPermutation");this._client=e,this._IPermutation=i}getIPermutation(){return this._IPermutation}getType(){return new k(this._client,this._IPermutation.type)}getTags(){return this._IPermutation.getTags()}hasTag(e){return this._IPermutation.hasTag(e)}getProperties(){return this._IPermutation.getAllProperties()}hasProperty(e){return!!this.getProperties().find(r=>r.name===e)}getProperty(e){return this._IPermutation.getProperty(e)}clone(){return new S(this._client,this._IPermutation.clone())}};var A=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","BlockCreated");t(this,"iName","blockPlace");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(yt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(yt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.players.getByIPlayer(e.player);!i||this._client.emit(this.name,{player:i,block:new h(this._client,e.block),dimension:e.dimension,cancel(){let r=e.dimension,n=e.block.location;i.getGamemode()==="creative"?r.runCommand(`setblock ${n.x} ${n.y} ${n.z} air`):r.runCommand(`setblock ${n.x} ${n.y} ${n.z} air 0 destroy`)}})}};o([s("BlockCreated")],A.prototype,"name",2),o([s("blockPlace")],A.prototype,"iName",2);import{world as ft}from"mojang-minecraft";var B=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","BlockDestroyed");t(this,"iName","blockBreak");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(ft.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(ft.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.players.getByIPlayer(e.player);!i||this._client.emit(this.name,{player:i,block:new h(this._client,e.block),brokenBlock:e.brokenBlockPermutation,dimension:e.dimension,cancel(){e.block.setPermutation(e.brokenBlockPermutation)}})}};o([s("BlockDestroyed")],B.prototype,"name",2),o([s("blockBreak")],B.prototype,"iName",2);import{world as gt}from"mojang-minecraft";var N=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","BlockHit");t(this,"iName","entityHit");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(gt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(gt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){if(!e.hitBlock)return;let i=this._client.players.getByIPlayer(e.entity);if(!!i)return this._client.emit(this.name,{player:i,block:new h(this._client,e.hitBlock),tool:i.getInventory().getItem(i.getSelectedSlot())})}};o([s("BlockHit")],N.prototype,"name",2),o([s("entityHit")],N.prototype,"iName",2);import{world as ht,Player as ti}from"mojang-minecraft";var M=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ItemUse");t(this,"iName","beforeItemUse");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(ht.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(ht.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){var i;this._client.emit(this.name,{source:e.source instanceof ti?this._client.players.getByIPlayer(e.source):this._client.entities.getByIEntity(e.source),item:(i=new b(this._client,e.item))!=null?i:void 0,cancel(){e.cancel=!0}})}};o([s("ItemUse")],M.prototype,"name",2),o([s("beforeItemUse")],M.prototype,"iName",2);import{world as bt,Player as ii}from"mojang-minecraft";var D=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ItemInteract");t(this,"iName","beforeItemUseOn");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(bt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(bt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){var i;this._client.emit(this.name,{source:e.source instanceof ii?this._client.players.getByIPlayer(e.source):this._client.entities.getByIEntity(e.source),item:(i=new b(this._client,e.item))!=null?i:void 0,block:new h(this._client,e.source.dimension.getBlock(e.blockLocation)),blockLocation:e.blockLocation,faceLocationX:e.faceLocationX,faceLocationY:e.faceLocationY,cancel(){e.cancel=!0}})}};o([s("ItemInteract")],D.prototype,"name",2),o([s("beforeItemUseOn")],D.prototype,"iName",2);import{world as _t}from"mojang-minecraft";var L=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ItemEvent");t(this,"iName","beforeItemDefinitionEvent");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(_t.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(_t.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){if(e.source.id!=="minecraft:player")return;let i=this._client.players.getByIPlayer(e.source);!i||this._client.emit(this.name,{player:i,item:new b(this._client,e.item),event:e.eventName,cancel(){e.cancel=!0}})}};o([s("ItemEvent")],L.prototype,"name",2),o([s("beforeItemDefinitionEvent")],L.prototype,"iName",2);var $=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ItemDropped");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("Swing",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("Swing",this._logic),this._registered=!1)}__logic(e){let i=this._client.world.getBlock(e.getLocation(),e.getDimensionName()),r=this._client.entities.getLastest();!r||(r==null?void 0:r.getId())!=="minecraft:item"||i.getId()!=="minecraft:air"||this._client.emit(this.name,{player:e,item:r})}};o([s("ItemDropped")],$.prototype,"name",2),o([s("custom")],$.prototype,"iName",2);import{world as vt,Player as ri}from"mojang-minecraft";var R=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityCreated");t(this,"iName","entityCreate");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(vt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(vt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){if(e.entity instanceof ri)return;let i=this._client.entities.create(e.entity);this._client.entities.add(i),this._client.emit(this.name,i)}};o([s("EntityCreated")],R.prototype,"name",2),o([s("entityCreate")],R.prototype,"iName",2);var F=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityDestroyed");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("Tick",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("Tick",this._logic),this._registered=!1)}__logic(){for(let[,e]of this._client.entities.getAll())try{e.getIEntity().id}catch(i){this._client.emit(this.name,e),this._client.entities.remove(e)}}};o([s("EntityDestroyed")],F.prototype,"name",2),o([s("custom")],F.prototype,"iName",2);var j=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","PlayerTag");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("Tick",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("Tick",this._logic),this._registered=!1)}__logic(){for(let[,e]of this._client.players.getAll())try{for(let i of e.getTags())!i.startsWith("beapi:")||(e.removeTag(i),this._client.emit(this.name,{player:e,tag:i.replace("beapi:","")}))}catch(i){}}};o([s("PlayerTag")],j.prototype,"name",2),o([s("custom")],j.prototype,"iName",2);var O=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityTag");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("Tick",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("Tick",this._logic),this._registered=!1)}__logic(){for(let[,e]of this._client.entities.getAll())try{for(let i of e.getTags())!i.startsWith("beapi:")||(e.removeTag(i),this._client.emit(this.name,{entity:e,tag:i.replace("beapi:","")}))}catch(i){}}};o([s("EntityTag")],O.prototype,"name",2),o([s("custom")],O.prototype,"iName",2);var z=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EnteredWater");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="in_water"&&(e.player.isInWater(!0),this._client.emit(this.name,e.player))}};o([s("EnteredWater")],z.prototype,"name",2),o([s("custom")],z.prototype,"iName",2);var H=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ExitedWater");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="exit_water"&&(e.player.isInWater(!1),this._client.emit(this.name,e.player))}};o([s("ExitedWater")],H.prototype,"name",2),o([s("custom")],H.prototype,"iName",2);var U=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Jump");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="jump"&&(e.player.isGrounded(!1),this._client.emit(this.name,e.player))}};o([s("Jump")],U.prototype,"name",2),o([s("custom")],U.prototype,"iName",2);var K=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Landed");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="land"&&(e.player.isGrounded(!0),this._client.emit(this.name,e.player))}};o([s("Landed")],K.prototype,"name",2),o([s("custom")],K.prototype,"iName",2);var W=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Swing");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="swing"&&this._client.emit(this.name,e.player)}};o([s("Swing")],W.prototype,"name",2),o([s("custom")],W.prototype,"iName",2);var G=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedBurning");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="on_fire"&&(e.player.isBurning(!0),this._client.emit(this.name,e.player))}};o([s("StartedBurning")],G.prototype,"name",2),o([s("custom")],G.prototype,"iName",2);var q=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedBurning");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="off_fire"&&(e.player.isBurning(!1),this._client.emit(this.name,e.player))}};o([s("StoppedBurning")],q.prototype,"name",2),o([s("custom")],q.prototype,"iName",2);var J=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedMoving");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="on_move"&&(e.player.isMoving(!0),this._client.emit(this.name,e.player))}};o([s("StartedMoving")],J.prototype,"name",2),o([s("custom")],J.prototype,"iName",2);var X=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedMoving");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="off_move"&&(e.player.isMoving(!1),this._client.emit(this.name,e.player))}};o([s("StoppedMoving")],X.prototype,"name",2),o([s("custom")],X.prototype,"iName",2);var Y=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedRiding");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="on_ride"&&(e.player.isRiding(!0),this._client.emit(this.name,e.player))}};o([s("StartedRiding")],Y.prototype,"name",2),o([s("custom")],Y.prototype,"iName",2);var Q=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedRiding");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="off_ride"&&(e.player.isRiding(!1),this._client.emit(this.name,e.player))}};o([s("StoppedRiding")],Q.prototype,"name",2),o([s("custom")],Q.prototype,"iName",2);var Z=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedSleeping");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="sleep"&&(e.player.isSleeping(!0),this._client.emit(this.name,e.player))}};o([s("StartedSleeping")],Z.prototype,"name",2),o([s("custom")],Z.prototype,"iName",2);var V=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedSleeping");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="wake"&&(e.player.isSleeping(!1),this._client.emit(this.name,e.player))}};o([s("StoppedSleeping")],V.prototype,"name",2),o([s("custom")],V.prototype,"iName",2);var ee=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedSneaking");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="sneak"&&this._client.emit(this.name,e.player)}};o([s("StartedSneaking")],ee.prototype,"name",2),o([s("custom")],ee.prototype,"iName",2);var te=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedSneaking");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="unsneak"&&this._client.emit(this.name,e.player)}};o([s("StoppedSneaking")],te.prototype,"name",2),o([s("custom")],te.prototype,"iName",2);var ie=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedSprinting");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="on_sprint"&&(e.player.isSprinting(!0),this._client.emit(this.name,e.player))}};o([s("StartedSprinting")],ie.prototype,"name",2),o([s("custom")],ie.prototype,"iName",2);var re=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedSprinting");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="off_sprint"&&(e.player.isSprinting(!1),this._client.emit(this.name,e.player))}};o([s("StoppedSprinting")],re.prototype,"name",2),o([s("custom")],re.prototype,"iName",2);var ne=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StartedSwimming");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="on_swim"&&(e.player.isSwimming(!0),this._client.emit(this.name,e.player))}};o([s("StartedSwimming")],ne.prototype,"name",2),o([s("custom")],ne.prototype,"iName",2);var oe=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","StoppedSwimming");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="off_swim"&&(e.player.isSwimming(!1),this._client.emit(this.name,e.player))}};o([s("StoppedSwimming")],oe.prototype,"name",2),o([s("custom")],oe.prototype,"iName",2);import{world as Ct,Player as ni}from"mojang-minecraft";var se=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityHit");t(this,"iName","entityHit");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Ct.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Ct.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){var n,m;if(!e.hitEntity||e.hitEntity.id==="minecraft:player")return;let i=e.entity instanceof ni?this._client.players.getByIPlayer(e.entity):this._client.entities.getByIEntity(e.entity),r=this._client.entities.getByIEntity(e.hitEntity);if(!!r)return this._client.emit(this.name,{attacker:i,target:r,weapon:(m=(n=i==null?void 0:i.getInventory())==null?void 0:n.getItem(i.getSelectedSlot()))!=null?m:void 0})}};o([s("EntityHit")],se.prototype,"name",2),o([s("entityHit")],se.prototype,"iName",2);import{world as Et,Player as oi}from"mojang-minecraft";var le=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","PlayerHit");t(this,"iName","entityHit");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Et.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Et.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){var n,m;if(!e.hitEntity||e.hitEntity.id!=="minecraft:player")return;let i=e.entity instanceof oi?this._client.players.getByIPlayer(e.entity):this._client.entities.getByIEntity(e.entity),r=this._client.players.getByIPlayer(e.hitEntity);if(!!r)return this._client.emit(this.name,{attacker:i,target:r,weapon:(m=(n=i==null?void 0:i.getInventory())==null?void 0:n.getItem(i.getSelectedSlot()))!=null?m:void 0})}};o([s("PlayerHit")],le.prototype,"name",2),o([s("entityHit")],le.prototype,"iName",2);import{world as xt}from"mojang-minecraft";var ae=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Explosion");t(this,"iName","beforeExplosion");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(xt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(xt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.entities.getByIEntity(e.source);this._client.emit(this.name,{source:i,dimension:e.dimension,impactedBlocks:e.impactedBlocks,cancel(){e.cancel=!0}})}};o([s("Explosion")],ae.prototype,"name",2),o([s("beforeExplosion")],ae.prototype,"iName",2);var ce=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Death");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="died"&&(e.player.isAlive(!1),this._client.emit(this.name,e.player))}};o([s("Death")],ce.prototype,"name",2),o([s("custom")],ce.prototype,"iName",2);var me=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Respawn");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("PlayerTag",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("PlayerTag",this._logic),this._registered=!1)}__logic(e){e.tag==="respawn"&&(e.player.isAlive(!0),this._client.emit(this.name,e.player))}};o([s("Respawn")],me.prototype,"name",2),o([s("custom")],me.prototype,"iName",2);import{world as It}from"mojang-minecraft";var pe=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Piston");t(this,"iName","beforePistonActivate");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(It.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(It.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){this._client.emit(this.name,{block:new h(this._client,e.block),dimension:e.dimension,piston:e.piston,extending:e.isExpanding,cancel(){e.cancel=!0}})}};o([s("Piston")],pe.prototype,"name",2),o([s("beforePistonActivate")],pe.prototype,"iName",2);import{world as Pt,Player as si}from"mojang-minecraft";var de=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EffectAdded");t(this,"iName","effectAdd");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Pt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Pt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){this._client.emit(this.name,{target:e.entity instanceof si?this._client.players.getByIPlayer(e.entity):this._client.entities.getByIEntity(e.entity),effect:e.effect,state:e.effectState})}};o([s("EffectAdded")],de.prototype,"name",2),o([s("effectAdd")],de.prototype,"iName",2);import{world as Tt}from"mojang-minecraft";var ue=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","WeatherUpdated");t(this,"iName","weatherChange");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Tt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Tt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=this._client.world.getDimension(e.dimension);this._client.emit(this.name,{lightning:e.lightning,raining:e.raining,dimension:i})}};o([s("WeatherUpdated")],ue.prototype,"name",2),o([s("weatherChange")],ue.prototype,"iName",2);import{world as wt}from"mojang-minecraft";var ye=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Tick");t(this,"iName","tick");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(wt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(wt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){this._client.emit(this.name,{currentTick:e.currentTick,deltaTime:e.deltaTime})}};o([s("Tick")],ye.prototype,"name",2),o([s("tick")],ye.prototype,"iName",2);import{world as kt,Player as li}from"mojang-minecraft";var fe=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityEventTrigger");t(this,"iName","beforeDataDrivenEntityTriggerEvent");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(kt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(kt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){if(e.entity instanceof li)return;let i=this._client.entities.getByIEntity(e.entity);!i||this._client.emit(this.name,{entity:i,event:e.id,data:e.modifiers,cancel:()=>{e.cancel=!0}})}};o([s("EntityEventTrigger")],fe.prototype,"name",2),o([s("beforeDataDrivenEntityTriggerEvent")],fe.prototype,"iName",2);import{world as St,Player as ai}from"mojang-minecraft";var ge=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","PlayerEventTrigger");t(this,"iName","beforeDataDrivenEntityTriggerEvent");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(St.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(St.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){if(!(e.entity instanceof ai))return;let i=this._client.players.getByIPlayer(e.entity);!i||this._client.emit(this.name,{player:i,event:e.id,data:e.modifiers,cancel:()=>{e.cancel=!0}})}};o([s("PlayerEventTrigger")],ge.prototype,"name",2),o([s("beforeDataDrivenEntityTriggerEvent")],ge.prototype,"iName",2);import{world as At,Player as ci}from"mojang-minecraft";var he=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ItemEventTrigger");t(this,"iName","beforeItemDefinitionEvent");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(At.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(At.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){this._client.emit(this.name,{source:e.source instanceof ci?this._client.players.getByIPlayer(e.source):this._client.entities.getByIEntity(e.source),event:e.eventName,item:new b(this._client,e.item),cancel:()=>{e.cancel=!0}})}};o([s("ItemEventTrigger")],he.prototype,"name",2),o([s("beforeItemDefinitionEvent")],he.prototype,"iName",2);var be=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"oldScores",new Map);t(this,"ignoreNextFor",[]);t(this,"name","PlayerScoreUpdated");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("Tick",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("Tick",this._logic),this._registered=!1)}__logic(){for(let[,e]of this._client.players.getAll()){let i=[];for(let r of this._client.scoreboards.getObjectives()){let n=e.getScore(r);i.push({score:n,objective:r})}if(!this.oldScores.has(e)){this.oldScores.set(e,i);continue}for(let r of this.oldScores.get(e)){let n=i.find(m=>m.objective.id===r.objective.id);if(!!n&&n.score!==r.score){if(this.ignoreNextFor.includes(e)){this.ignoreNextFor.splice(this.ignoreNextFor.indexOf(e),1);continue}this._client.emit(this.name,{player:e,objective:n.objective,value:n.score,old:r.score,cancel:()=>{this.ignoreNextFor.push(e),e.setScore(r.objective,r.score)}})}}this.oldScores.set(e,i)}for(let[e]of this.oldScores)try{e.getIPlayer().id}catch(i){this.ignoreNextFor=this.ignoreNextFor.filter(r=>r!==e),this.oldScores.delete(e)}}};o([s("PlayerScoreUpdated")],be.prototype,"name",2),o([s("custom")],be.prototype,"iName",2);var _e=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"oldScores",new Map);t(this,"ignoreNextFor",[]);t(this,"name","EntityScoreUpdated");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("Tick",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("Tick",this._logic),this._registered=!1)}__logic(){for(let[,e]of this._client.entities.getAll()){let i=[];for(let r of this._client.scoreboards.getObjectives()){let n=e.getScore(r);i.push({score:n,objective:r})}if(!this.oldScores.has(e)){this.oldScores.set(e,i);continue}for(let r of this.oldScores.get(e)){let n=i.find(m=>m.objective.id===r.objective.id);if(!!n&&n.score!==r.score){if(this.ignoreNextFor.includes(e)){this.ignoreNextFor.splice(this.ignoreNextFor.indexOf(e),1);continue}this._client.emit(this.name,{entity:e,objective:n.objective,value:n.score,old:r.score,cancel:()=>{this.ignoreNextFor.push(e),e.setScore(r.objective,r.score)}})}}this.oldScores.set(e,i)}for(let[e]of this.oldScores)try{e.getIEntity().id}catch(i){this.ignoreNextFor=this.ignoreNextFor.filter(r=>r!==e),this.oldScores.delete(e)}}};o([s("EntityScoreUpdated")],_e.prototype,"name",2),o([s("custom")],_e.prototype,"iName",2);var ve=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"oldTags",new Map);t(this,"ignoreNextAddFor",[]);t(this,"ignoreNextRemoveFor",[]);t(this,"name","PlayerTagsUpdated");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("Tick",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("Tick",this._logic),this._registered=!1)}__logic(){var e,i;for(let[,r]of this._client.players.getAll()){let n=r.getTags().filter(m=>!m.startsWith("beapi:"));if(!this.oldTags.has(r)){this.oldTags.set(r,n);continue}for(let m of(e=this.oldTags.get(r))!=null?e:[])if(!n.find(d=>d===m)){if(this.ignoreNextRemoveFor.includes(r)){this.ignoreNextRemoveFor.splice(this.ignoreNextRemoveFor.indexOf(r),1);continue}this._client.emit(this.name,{player:r,tag:m,method:"remove",cancel:()=>{r.addTag(m),this.ignoreNextAddFor.push(r)}})}for(let m of n)if(!((i=this.oldTags.get(r))==null?void 0:i.find(d=>d===m))){if(this.ignoreNextAddFor.includes(r)){this.ignoreNextAddFor.splice(this.ignoreNextAddFor.indexOf(r),1);continue}this._client.emit(this.name,{player:r,tag:m,method:"add",cancel:()=>{r.removeTag(m),this.ignoreNextRemoveFor.push(r)}})}this.oldTags.set(r,n)}for(let[r]of this.oldTags)try{r.getIPlayer().id}catch(n){this.ignoreNextAddFor=this.ignoreNextAddFor.filter(m=>m!==r),this.ignoreNextRemoveFor=this.ignoreNextRemoveFor.filter(m=>m!==r),this.oldTags.delete(r)}}};o([s("PlayerTagsUpdated")],ve.prototype,"name",2),o([s("custom")],ve.prototype,"iName",2);var Ce=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"oldTags",new Map);t(this,"ignoreNextAddFor",[]);t(this,"ignoreNextRemoveFor",[]);t(this,"name","EntityTagsUpdated");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("Tick",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("Tick",this._logic),this._registered=!1)}__logic(){var e,i;for(let[,r]of this._client.entities.getAll()){let n=r.getTags().filter(m=>!m.startsWith("beapi:"));if(!this.oldTags.has(r)){this.oldTags.set(r,n);continue}for(let m of(e=this.oldTags.get(r))!=null?e:[])if(!n.find(d=>d===m)){if(this.ignoreNextRemoveFor.includes(r)){this.ignoreNextRemoveFor.splice(this.ignoreNextRemoveFor.indexOf(r),1);continue}this._client.emit(this.name,{entity:r,tag:m,method:"remove",cancel:()=>{r.addTag(m),this.ignoreNextAddFor.push(r)}})}for(let m of n)if(!((i=this.oldTags.get(r))==null?void 0:i.find(d=>d===m))){if(this.ignoreNextAddFor.includes(r)){this.ignoreNextAddFor.splice(this.ignoreNextAddFor.indexOf(r),1);continue}this._client.emit(this.name,{entity:r,tag:m,method:"add",cancel:()=>{r.removeTag(m),this.ignoreNextRemoveFor.push(r)}})}this.oldTags.set(r,n)}for(let[r]of this.oldTags)try{r.getIEntity().id}catch(n){this.ignoreNextAddFor=this.ignoreNextAddFor.filter(m=>m!==r),this.ignoreNextRemoveFor=this.ignoreNextRemoveFor.filter(m=>m!==r),this.oldTags.delete(r)}}};o([s("EntityTagsUpdated")],Ce.prototype,"name",2),o([s("custom")],Ce.prototype,"iName",2);import{world as Bt,Player as mi,Entity as pi}from"mojang-minecraft";var Ee=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","EntityHurt");t(this,"iName","entityHurt");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Bt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Bt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){var m,u;if(e.hurtEntity.id==="minecraft:player")return;let i=e.damagingEntity instanceof mi?this._client.players.getByIPlayer(e.damagingEntity):this._client.entities.getByIEntity(e.damagingEntity),r=this._client.entities.getByIEntity(e.hurtEntity);if(!r)return;let n=e.projectile instanceof pi?this._client.entities.getByIEntity(e.projectile):void 0;return this._client.emit(this.name,{attacker:i,target:r,weapon:(u=(m=i==null?void 0:i.getInventory())==null?void 0:m.getItem(i.getSelectedSlot()))!=null?u:void 0,damage:e.damage,cause:e.cause,projectile:n})}};o([s("EntityHurt")],Ee.prototype,"name",2),o([s("entityHurt")],Ee.prototype,"iName",2);import{world as Nt,Player as di,Entity as ui}from"mojang-minecraft";var xe=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","PlayerHurt");t(this,"iName","entityHurt");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Nt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Nt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){var m,u;if(e.hurtEntity.id!=="minecraft:player")return;let i=e.damagingEntity instanceof di?this._client.players.getByIPlayer(e.damagingEntity):this._client.entities.getByIEntity(e.damagingEntity),r=this._client.players.getByIPlayer(e.hurtEntity);if(!r)return;let n=e.projectile instanceof ui?this._client.entities.getByIEntity(e.projectile):void 0;return this._client.emit(this.name,{attacker:i,target:r,weapon:(u=(m=i==null?void 0:i.getInventory())==null?void 0:m.getItem(i.getSelectedSlot()))!=null?u:void 0,damage:e.damage,cause:e.cause,projectile:n})}};o([s("PlayerHurt")],xe.prototype,"name",2),o([s("entityHurt")],xe.prototype,"iName",2);import{world as Mt}from"mojang-minecraft";var Ie=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","Lever");t(this,"iName","leverActivate");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(Mt.events[this.iName].subscribe(this._logic),this._registered=!0)}off(){this._registered&&(Mt.events[this.iName].unsubscribe(this._logic),this._registered=!1)}__logic(e){let i=new h(this._client,e.block);this._client.emit(this.name,{block:i,dimension:e.dimension,powered:e.isPowered,cancel:()=>{let r=i.getPermutation(),n=r.getProperty("open_bit");n.value&&(n.value=!1),n.value||(n.value=!0),i.setPermutation(r)}})}};o([s("Lever")],Ie.prototype,"name",2),o([s("leverActivate")],Ie.prototype,"iName",2);import{Location as Je}from"mojang-minecraft";import{ModalFormData as yi}from"mojang-minecraft-ui";var Oe=class{constructor(e,i){t(this,"player");t(this,"_client");t(this,"form");t(this,"callback");t(this,"canceled",!1);t(this,"title","Unnamed Form");this.player=e,this._client=i,this.form=new yi,this._client.emit("ModalFormCreated",{player:this.player,form:this,result:this.result.bind(this),cancel:()=>{this.canceled=!0}})}addInput(e,i,r){return this.form.textField(e,i,r!=null?r:""),this}addDropdown(e,i,r){return this.form.dropdown(e,i,r!=null?r:0),this}addSlider(e,i,r,n,m){return this.form.slider(e,i,r,n,m!=null?m:0),this}addToggle(e,i){return this.form.toggle(e,i!=null?i:!1),this}addIcon(e){return this.form.icon(e),this}send(e){if(this.canceled)return this.callback&&this.callback({isCanceled:!0}),e?e({isCanceled:!0}):void 0;this.form.title(this.title),this.form.show(this.player.getIPlayer()).then(i=>{if(!!e)return this.callback&&this.callback(i),e(i)}).catch(i=>{console.error(i)})}result(e){this.callback=e}};import{MessageFormData as fi}from"mojang-minecraft-ui";var ze=class{constructor(e,i){t(this,"player");t(this,"_client");t(this,"form");t(this,"callback");t(this,"canceled",!1);t(this,"title","Unnamed Form");t(this,"body","");t(this,"button1","Yes");t(this,"button2","No");this.player=e,this._client=i,this.form=new fi,this._client.emit("MessageFormCreated",{player:this.player,form:this,result:this.result.bind(this),cancel:()=>{this.canceled=!0}})}send(e){if(this.canceled)return this.callback&&this.callback({isCanceled:!0}),e?e({isCanceled:!0}):void 0;this.form.title(this.title),this.form.body(this.body),this.form.button1(this.button1),this.form.button2(this.button2),this.form.show(this.player.getIPlayer()).then(i=>{if(!!e)return this.callback&&this.callback(i),e(i)}).catch(i=>{console.error(i)})}result(e){this.callback=e}};import{ActionFormData as gi}from"mojang-minecraft-ui";var He=class{constructor(e,i){t(this,"player");t(this,"_client");t(this,"form");t(this,"callback");t(this,"canceled",!1);t(this,"title","Unnamed Form");t(this,"body","");this.player=e,this._client=i,this.form=new gi,this._client.emit("ActionFormCreated",{player:this.player,form:this,result:this.result.bind(this),cancel:()=>{this.canceled=!0}})}addButton(e,i){return this.form.button(e,i!=null?i:void 0),this}send(e){if(this.canceled)return this.callback&&this.callback({isCanceled:!0}),e?e({isCanceled:!0}):void 0;this.form.title(this.title),this.form.body(this.body),this.form.show(this.player.getIPlayer()).then(i=>{if(!!e)return this.callback&&this.callback(i),e(i)}).catch(i=>{console.error(i)})}result(e){this.callback=e}};import{Location as Ge}from"mojang-minecraft";function Dt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let e=Math.random()*16|0;return(l==="x"?e:e&3|8).toString(16)})}function vl(l){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/gi.test(l)}function El(l,e){let i=[];for(let r=Math.min(l[0],e[0]);r<=Math.max(l[0],e[0]);r++)for(let n=Math.min(l[1],e[1]);n<=Math.max(l[1],e[1]);n++)for(let m=Math.min(l[2],e[2]);m<=Math.max(l[2],e[2]);m++)i.push([r,n,m]);return i}function Il(l,e,i){let r=Math.max(l,e),n=Math.min(l,e);return i>=n&&i<=r}import{world as hi}from"mojang-minecraft";function v(l,e="overworld",i=!1){try{let r=hi.getDimension(e).runCommand(l);return{statusMessage:r.statusMessage,data:r,err:!1}}catch(r){return i&&console.debug(`[runCommand] [error] (standalone): ${String(r)}`),{statusMessage:String(r),data:null,err:!0}}}function Lt(l){return l.split(" ").map(e=>String.fromCharCode(parseInt(e,2))).join("")}function $t(l){return l.split("").map(e=>e.charCodeAt(0).toString(2)).join(" ")}function Ue(l){return Object.keys(l).map(e=>[e,l[e]])}var Ke=class{constructor(e,i=0){t(this,"epoch");t(this,"unique");t(this,"inc",0);this.epoch=i,this.unique=e}get increment(){return this.inc===1e4?this.inc=0:this.inc++}generate(){let e=Date.now();return`${Math.abs(e-this.epoch)}_${this.increment}_${this.unique}`}};function Be(l){let e=Dt().substring(0,16);v(`scoreboard objectives add "${e}" dummy`);let{err:i,statusMessage:r}=l.executeCommand(`scoreboard players test @s "${e}" * *`);if(v(`scoreboard objectives remove "${e}"`),!i)return 0;let n=JSON.parse(r);return Number(n.statusMessage.split(" ")[1])}var Ml=l=>{let e=new Set,i=l;do Object.getOwnPropertyNames(i).map(r=>e.add(r));while(i=Object.getPrototypeOf(i));return[...e.keys()]};import{MinecraftEnchantmentTypes as We}from"mojang-minecraft";function ut(l){let e=[];if(!l||!l.hasComponent("minecraft:enchantments"))return e;let i=l.getComponent("minecraft:enchantments");for(let r of Object.keys(We)){if(!i.enchantments.hasEnchantment(We[r]))continue;let n=i.enchantments.getEnchantment(We[r]);e.push(n)}return e}var Pe=class{constructor(e,i){t(this,"_client");t(this,"_IEntity");t(this,"_runtimeId");t(this,"_uniqueId");this._client=e,this._IEntity=i,this._runtimeId=this._client.entities.newRuntimeId(),this._uniqueId=Be(this)}destroy(){try{this._IEntity.kill()}catch(e){}}getIEntity(){return this._IEntity}getRuntimeId(){return this._runtimeId}getId(){return this._IEntity.id}getUniqueId(){return this._uniqueId}getNameTag(){return this._IEntity.nameTag}setNameTag(e){this._IEntity.nameTag=e}isSneaking(){return this._IEntity.isSneaking}getTags(){return this._IEntity.getTags()}hasTag(e){return this._IEntity.hasTag(e)}addTag(e){return this._IEntity.addTag(e)}removeTag(e){return this._IEntity.removeTag(e)}executeCommand(e,i=!1){try{let r=this._IEntity.runCommand(e);return{statusMessage:r.statusMessage,data:r,err:!1}}catch(r){return i&&console.debug(`[BeAPI] [Entity] [executeCommand]: ${String(r)}`),{statusMessage:String(r),data:null,err:!0}}}getScore(e){var r;let i=this.executeCommand(`scoreboard players test @s "${e.id}" * *`);return i.err?0:parseInt(String((r=i.statusMessage)==null?void 0:r.split(" ")[1]),10)}setScore(e,i){return this.executeCommand(`scoreboard players set @s "${e.id}" ${i}`),this.getScore(e)}addScore(e,i){return this.executeCommand(`scoreboard players add @s "${e.id}" ${i}`),this.getScore(e)}removeScore(e,i){return this.executeCommand(`scoreboard players remove @s "${e.id}" ${i}`),this.getScore(e)}getLocation(){let e=this._IEntity.location;return{x:Math.floor(e.x),y:Math.floor(e.y),z:Math.floor(e.z)}}getPreciseLocation(){let e=this._IEntity.location;return{x:e.x,y:e.y,z:e.z}}getDimension(){return this._IEntity.dimension}getDimensionName(){return this.getDimension().id.split(":")[1].replace(/_/g," ")}getInventory(){if(!!this._IEntity.hasComponent("minecraft:inventory"))return new w(this._client,this._IEntity.getComponent("minecraft:inventory"))}getSelectedSlot(){return 0}getHealth(){return this._IEntity.getComponent("minecraft:health")}getVelocity(){return this._IEntity.velocity}setVelocity(e){this._IEntity.setVelocity(e)}teleport(e,i,r,n){let m=new Ge(e.x,e.y,e.z);this._IEntity.teleport(m,this._client.world.getDimension(i),r,n)}teleportFacing(e,i,r){let n=new Ge(e.x,e.y,e.z),m=new Ge(r.x,r.y,r.z);this._IEntity.teleportFacing(n,this._client.world.getDimension(i),m)}triggerEvent(e){this._IEntity.triggerEvent(e)}getRotation(){return this._IEntity.bodyRotation}getHeadLocation(){return this._IEntity.headLocation}getComponent(e){return this._IEntity.getComponent(e)}hasComponent(e){return this._IEntity.hasComponent(e)}addEffect(e,i,r){return this._IEntity.addEffect(e,i,r)}getEffect(e){return this._IEntity.getEffect(e)}};var qe=class{constructor(e){t(this,"_client");t(this,"_entities",new Map);t(this,"_runtimeId",0);this._client=e}newRuntimeId(){return this._runtimeId++}add(e){this._entities.set(e.getRuntimeId(),e)}create(e){return new Pe(this._client,e)}remove(e){this._entities.delete(e.getRuntimeId())}removeByRuntimeId(e){this._entities.delete(e)}getAll(){return this._entities}getAllAsArray(){return Array.from(this.getAll().values())}getByNameTag(e){return Array.from(this._entities.values()).filter(i=>i.getNameTag()===e)}getByIdentity(e){return Array.from(this._entities.values()).filter(i=>i.getId()===e)}getByRuntimeId(e){return this._entities.get(e)}getByUniqueId(e){return Array.from(this._entities.values()).find(i=>i.getUniqueId()===e)}getByIEntity(e){return Array.from(this._entities.values()).find(i=>i.getIEntity()===e)}getLastest(){return this._entities.get(this._runtimeId-1)}};var Ne=class extends Pe{constructor(e,i,r){super(e,i);t(this,"__client");t(this,"__IEntity");t(this,"__runtimeId");t(this,"__uniqueId");t(this,"_owner");this.__client=e,this.__IEntity=i,this.__runtimeId=this._client.entities.newRuntimeId(),this.__uniqueId=Be(this),this._owner=r}destroy(){super.destroy(),this._owner.hasAgent()}getOwner(){return this._owner}move(e){return this._owner.executeCommand(`agent move ${e}`),this}turn(e){return this._owner.executeCommand(`agent turn ${e}`),this}attack(e){return this._owner.executeCommand(`agent attack ${e}`),this}breakBlock(e){return this._owner.executeCommand(`agent destroy ${e}`),this}placeBlock(e,i=1){return this._owner.executeCommand(`agent place ${i} ${e}`),this}till(e){return this._owner.executeCommand(`agent till ${e}`),this}grabItem(e){return this._owner.executeCommand(`agent collect ${e}`),this}dropItem(e,i=1,r=1){return this._owner.executeCommand(`agent drop ${r} ${i} ${e}`),this}};var Te=class{constructor(e,i){t(this,"_client");t(this,"_IPlayer");t(this,"_name");t(this,"_agent");t(this,"_runtimeId");t(this,"_isSwimming",!1);t(this,"_isInWater",!1);t(this,"_isGrounded",!0);t(this,"_isBurning",!1);t(this,"_isMoving",!1);t(this,"_isSprinting",!1);t(this,"_isRiding",!1);t(this,"_isSleeping",!1);t(this,"_isAlive",!0);t(this,"_isMuted",!1);this._client=e,this._IPlayer=i,this._name=i.name,this._runtimeId=e.players.newRuntimeId(),this._agent=this.attemptFindAgent()}destroy(e="Instantiated player object destroyed!"){this._client.executeCommand(`kick "${this.getNameTag()}" ${e}`)}getIPlayer(){return this._IPlayer}getId(){return this._IPlayer.id}getRuntimeId(){return this._runtimeId}getName(){return this._name}getNameTag(){return this._IPlayer.nameTag}setNameTag(e){this._IPlayer.nameTag=e}getTags(){return this._IPlayer.getTags()}hasTag(e){return this._IPlayer.hasTag(e)}addTag(e){return this._IPlayer.addTag(e)}removeTag(e){return this._IPlayer.removeTag(e)}createModalForm(){return new Oe(this,this._client)}createMessageForm(){return new ze(this,this._client)}createActionForm(){return new He(this,this._client)}createAgent(){return this.getAgent()}hasAgent(){var e;try{return!!((e=this._agent)==null?void 0:e.getId())}catch(i){return this._agent=void 0,!1}}getAgent(){let e=this.attemptFindAgent();if(!e){this.executeCommand("agent create");let i=this._client.entities.getLastest();e=new Ne(this._client,i.getIEntity(),this),e.addTag(this._name),this._agent=e}return e}attemptFindAgent(){if(!this.hasAgent())return;if(this._agent)return this._agent;let e=Array.from(this._client.entities.getAll().values()).find(i=>i.getId()==="minecraft:agent"&&i.hasTag(this._name));return e?new Ne(this._client,e.getIEntity(),this):void 0}sendMessage(e){this.executeCommand(`tellraw @s {"rawtext":[{"text":"${e.replace(/"/g,'\\"')}"}]}`)}sendActionbar(e){this.executeCommand(`titleraw @s actionbar {"rawtext":[{"text":"${e.replace(/"/g,'\\"')}"}]}`)}sendTitle(e){this.executeCommand(`titleraw @s title {"rawtext":[{"text":"${e.replace(/"/g,'\\"')}"}]}`)}sendSubtitle(e){this.executeCommand(`titleraw @s subtitle {"rawtext":[{"text":"${e.replace(/"/g,'\\"')}"}]}`)}sendSound(e,i,r,n,m){var u,d,y;this.executeCommand(`playsound ${e} ${(u=i==null?void 0:i.x)!=null?u:""} ${(d=i==null?void 0:i.y)!=null?d:""} ${(y=i==null?void 0:i.z)!=null?y:""} ${r!=null?r:""} ${n!=null?n:""} ${m!=null?m:""}`)}sendAnimation(e){this.executeCommand(`playanimation @s ${e}`)}sendFog(e,i,r){this.executeCommand(`fog @s ${e} ${i} ${r}`)}executeCommand(e,i=!1){try{let r=this._IPlayer.runCommand(e);return{statusMessage:r.statusMessage,data:r,err:!1}}catch(r){return i&&console.debug(`[BeAPI] [Player] [executeCommand]: ${String(r)}`),{statusMessage:String(r),data:null,err:!0}}}executeFunction(e){return!this.executeCommand(`function ${e}`).err}getScore(e){var r;let i=this.executeCommand(`scoreboard players test @s "${e.id}" * *`);return i.err?0:parseInt(String((r=i.statusMessage)==null?void 0:r.split(" ")[1]),10)}setScore(e,i){return this.executeCommand(`scoreboard players set @s "${e.id}" ${i}`),this.getScore(e)}addScore(e,i){return this.executeCommand(`scoreboard players add @s "${e.id}" ${i}`),this.getScore(e)}removeScore(e,i){return this.executeCommand(`scoreboard players remove @s "${e.id}" ${i}`),this.getScore(e)}setGamemode(e){return e===this.getGamemode()?!0:!this.executeCommand(`gamemode ${e}`).err}getGamemode(){let e=this._client.executeCommand(`testfor @a[name="${this.getNameTag()}",m=c]`,this.getDimensionName()),i=this._client.executeCommand(`testfor @a[name="${this.getNameTag()}",m=a]`,this.getDimensionName()),r=this._client.executeCommand(`testfor @a[name="${this.getNameTag()}",m=s]`,this.getDimensionName());return e.err?i.err?r.err?"unknown":"survival":"adventure":"creative"}getLocation(){let e=this._IPlayer.location;return{x:Math.floor(e.x),y:Math.floor(e.y),z:Math.floor(e.z)}}getPreciseLocation(){let e=this._IPlayer.location;return{x:e.x,y:e.y,z:e.z}}getDimension(){return this._IPlayer.dimension}getDimensionName(){return this.getDimension().id.split(":")[1].replace(/_/g," ")}getInventory(){return new w(this._client,this._IPlayer.getComponent("minecraft:inventory"))}getSelectedSlot(){return this._IPlayer.selectedSlot}getHealth(){return this._IPlayer.getComponent("minecraft:health")}kick(e="You were kicked from the game!"){this.destroy(e)}getVelocity(){return this._IPlayer.velocity}setVelocity(e){this._IPlayer.setVelocity(e)}teleport(e,i,r,n){let m=new Je(e.x,e.y,e.z);this._IPlayer.teleport(m,this._client.world.getDimension(i),r,n)}teleportFacing(e,i,r){let n=new Je(e.x,e.y,e.z),m=new Je(r.x,r.y,r.z);this._IPlayer.teleportFacing(n,this._client.world.getDimension(i),m)}triggerEvent(e){this._IPlayer.triggerEvent(e)}getRotation(){return this._IPlayer.bodyRotation}getHeadLocation(){return this._IPlayer.headLocation}getComponent(e){return this._IPlayer.getComponent(e)}hasComponent(e){return this._IPlayer.hasComponent(e)}addEffect(e,i,r){return this._IPlayer.addEffect(e,i,r)}getEffect(e){return this._IPlayer.getEffect(e)}setItemCooldown(e,i){this._IPlayer.startItemCooldown(e,i)}getItemCooldown(e){return this._IPlayer.getItemCooldown(e)}getXp(){var i,r;return(r=(i=this.executeCommand("xp 0 @s").data)==null?void 0:i.level)!=null?r:0}addXpLevel(e){var r,n;return(n=(r=this.executeCommand(`xp ${e}l @s`).data)==null?void 0:r.level)!=null?n:0}removeXpLevel(e){var r,n;return(n=(r=this.executeCommand(`xp -${e}l @s`).data)==null?void 0:r.level)!=null?n:0}addXpFloat(e){var r,n;return(n=(r=this.executeCommand(`xp ${e} @s`).data)==null?void 0:r.level)!=null?n:0}removeXpFloat(e){var r,n;return(n=(r=this.executeCommand(`xp -${e} @s`).data)==null?void 0:r.level)!=null?n:0}shakeCamera(e,i,r){e==="clear"?this.executeCommand("camerashake stop @s"):this.executeCommand(`camerashake add @s ${i!=null?i:1} ${r!=null?r:1} ${e}`)}setSpawnPoint(e){return!this.executeCommand(`spawnpoint @s ${e.x} ${e.y} ${e.z}`).err}isSneaking(){return this._IPlayer.isSneaking}isSwimming(e){if(typeof e=="boolean")this._isSwimming=e;else return this._isSwimming}isInWater(e){if(typeof e=="boolean")this._isInWater=e;else return this._isInWater}isGrounded(e){if(typeof e=="boolean")this._isGrounded=e;else return this._isGrounded}isBurning(e){if(typeof e=="boolean")this._isBurning=e;else return this._isBurning}isMoving(e){if(typeof e=="boolean")this._isMoving=e;else return this._isMoving}isSprinting(e){if(typeof e=="boolean")this._isSprinting=e;else return this._isSprinting}isRiding(e){if(typeof e=="boolean")this._isRiding=e;else return this._isRiding}isSleeping(e){if(typeof e=="boolean")this._isSleeping=e;else return this._isSleeping}isAlive(e){if(typeof e=="boolean")this._isAlive=e;else return this._isAlive}isMuted(e){if(typeof e=="boolean")this._isMuted=e;else return this._isMuted}};var Xe=class{constructor(e){t(this,"_players",new Map);t(this,"_client");t(this,"_runtimeId",0);this._client=e}newRuntimeId(){return this._runtimeId++}add(e){this._players.set(e.getName(),e)}create(e){return new Te(this._client,e)}remove(e){this._players.delete(e.getName())}removeByName(e){this._players.delete(e)}getAll(){return this._players}getAllAsArray(){return Array.from(this.getAll().values())}getByName(e){return this._players.get(e)}getByNameTag(e){return Array.from(this._players.values()).find(i=>i.getNameTag()===e)}getByIPlayer(e){return Array.from(this._players.values()).find(i=>i.getIPlayer()===e)}};var we=class extends p{constructor(e){super();t(this,"_logic",this.__logic.bind(this));t(this,"_client");t(this,"_registered",!1);t(this,"name","ChestOpened");t(this,"iName","custom");t(this,"alwaysCancel",!1);this._client=e}on(){this._registered||(this._client.addListener("ItemInteract",this._logic),this._registered=!0)}off(){this._registered&&(this._client.removeListener("ItemInteract",this._logic),this._registered=!1)}__logic(e){if(!e.block.getInventory()||!(e.source instanceof Te))return;let i=e.block.getId().split(":")[1];this._client.emit(this.name,{block:e.block,player:e.source,type:i,cancel:()=>{e.cancel()}})}};o([s("ChestOpened")],we.prototype,"name",2),o([s("custom")],we.prototype,"iName",2);var Ye=[I,P,T,A,B,N,M,D,L,$,R,F,j,O,z,H,U,K,W,G,q,J,X,Y,Q,Z,V,ee,te,ie,re,ne,oe,se,le,ae,ce,me,pe,de,ue,ye,fe,ge,he,be,_e,ve,Ce,Ee,xe,Ie,we];import{Events as Ut,world as Ii}from"mojang-minecraft";var bi=String,_i=Number,vi=Boolean,x;(r=>{class l extends bi{static extract(m){let u=m.readNext();if(typeof u=="string"){if(!u.length)return this.extract(m);if(u.startsWith('"')){let d=[];for(let y=u;typeof y=="string"&&(d.push(y),!(y.endsWith('"')&&(y.length>1||d.length>1)));y=m.readNext());if(d[d.length-1].endsWith('"'))return d.join(" ").slice(1).slice(0,-1);m.throwSyntaxError('Unclosed string scope! Expected: "')}else return u}else m.throwSyntaxError("Expected argument!")}}t(l,"displayName","string"),r.String=l;class e extends _i{static extract(m){let u=m.readNext();if(typeof u=="string"){if(!u.length)return this.extract(m);let d=parseFloat(u);if(d)return d;m.throwSyntaxError("Expected integer or floating point!")}else m.throwSyntaxError("Expected argument!")}}t(e,"displayName","number"),r.Number=e;class i extends vi{static extract(m){let u=m.readNext();if(typeof u=="string"){if(!u.length)return this.extract(m);if(u=u.toLowerCase(),u!=="true"&&u!=="false")m.throwSyntaxError('Expected "true" or "false"!');else return u==="true"}else m.throwSyntaxError("Expected argument!")}}t(i,"displayName","boolean"),r.Boolean=i})(x||(x={}));function Rt(l){let e=Object.values(l)[0];Array.isArray(e)&&(e=e[0]);for(let i in x)if(e===x[i])return!0;return!1}var Qe=[];for(let l in x)l&&Qe.push(x[l]);function Ci(l){for(let e of Object.keys(l)){let i=l[e];if(Array.isArray(i)){if(i.length>2||!Qe.includes(i[0])||typeof i[1]!="boolean")return e}else if(!Qe.includes(i))return e}}var Ze=class{constructor(e){t(this,"_client");t(this,"_commands",new Map);t(this,"_enabled",!1);t(this,"_prefix","-");t(this,"__onChatHandler",this._onChatHandler.bind(this));this._client=e,this.register("help","Get help on all registered commands!",{aliases:["h"]},{command:[x.String,!0]},(i,r)=>{this._onHelpCommand(i,r)}),this.enable()}_onChatHandler(e){return this.tryExecuteFrom(e.message,e.sender,e)}disable(){!this._enabled||(this._enabled=!1,this._client.removeListener("OnChat",this.__onChatHandler))}enable(){this._enabled||(this._enabled=!0,this._client.addListener("OnChat",this.__onChatHandler))}getClient(){return this._client}getEnabled(){return Boolean(this._enabled)}setPrefix(e){this._prefix=e}getPrefix(){return this._prefix}getAll(){return this._commands}getAllAsArray(){return Array.from(this._commands.values())}getCommand(e){return this._commands.get(e)}register(e,i,r,n,m){let u,d,y;if(typeof r=="function"?y=r:Rt(r)?d=r:u=r,n&&(typeof n=="function"?y=n:d=n),m&&(y=m),d){let g=Ci(d);if(g)throw new Error(`Invalid argument schema when registering command "${e}". Key "${g}" expected a CommandType or [CommandType, boolean]!`)}let f=ct(E({name:e,description:i},u!=null?u:{}),{schema:d!=null?d:{},call:y});return this._commands.set(e,f),this._client.emit("CommandRegistered",{command:f,cancel:()=>{this._commands.delete(e)}}),f}unregister(e){return this._commands.delete(e)}tryExecuteFrom(e,i,r){var m,u,d;if(!e.startsWith(this._prefix))return;r.cancel();let n=new Ve(this,i,e);try{n.tryExecute()}catch(y){let f=y;if(f.user)return console.error(`An error occurred in command callback: [${(m=f.name)!=null?m:"Error"}]: ${(u=f.message)!=null?u:"No error message..."}
${(d=f.stack)!=null?d:"No error stack trace..."}`),i.sendMessage("\xA7c\xA7\xA2An error occured while executing command!");i.sendMessage(`\xA7c\xA7\xA2${f.message}`)}}_onHelpCommand(e,i){var r,n,m,u,d;if(i.command){let y=this.getAllAsArray().find(f=>{var g;return f.name===i.command||((g=f.aliases)==null?void 0:g.includes(i.command))});if(!y||y.hideFromHelp)return e.sendMessage(`\xA7c\xA7\xA2Unable to find command with the name ${i.command}!`);e.sendMessage(`\xA79Info on command "${y.name}"\xA7r
  \xA77Usage:\xA7r
    \xA78${(r=y.usage)!=null?r:this.generateUsage(y)}\xA7r
  \xA77Description:\xA7r
    \xA78${y.description}\xA7r
  \xA77Aliases:\xA7r
    \xA78${(m=(n=y.aliases)==null?void 0:n.join(", "))!=null?m:"N/A"}\xA7r
  \xA77Permissions:\xA7r
    \xA78${(d=(u=y.permissionTags)==null?void 0:u.join(", "))!=null?d:"N/A"}
`)}else{let y=this.getAllAsArray().filter(f=>!f.hideFromHelp).map(f=>{var g;return`  \xA76${this._prefix}${f.name} \xA78- ${(g=f.description)!=null?g:"No description given..."}`}).join(`
`);e.sendMessage(`\xA79BeAPI v${this._client.currentVersion} Command List (${this.getAllAsArray().length})\xA7r
${y}
`)}}overrideHelpCommand(e){this._onHelpCommand=e}generateUsage(e){var n;if(e.usage)return e.usage;let r=Object.keys((n=e.schema)!=null?n:{}).map(m=>{var _;let u=e.schema[m],d=Array.isArray(u)?u[0]:u,y=Array.isArray(u)&&(_=u[1])!=null?_:!1,f=y?"[":"<",g=y?"]":">";return`${f}${m}: ${d.displayName}${g}`}).join(" ");return`${this.getPrefix()}${e.name} ${r}`}};var Ve=class{constructor(e,i,r){t(this,"_manager");t(this,"_player");t(this,"_split");t(this,"_splitPos",0);t(this,"_cmdRef");t(this,"execString");this.execString=r,this._manager=e,this._player=i,this._split=this.execString.substring(this._manager.getPrefix().length).split(" ");let n=this._split[this._splitPos++];this._cmdRef=this._manager.getAllAsArray().find(m=>{var u;return m.name===n||((u=m.aliases)==null?void 0:u.includes(n))})}isValid(){return!!this._cmdRef}_getIndex(){return this._manager.getPrefix().length+this._split.slice(0,this._splitPos).join(" ").length}_throwInvalidCommand(){throw new Error(`Unable to find command with the name "${this._split[0]}"!`)}_buildArgs(){var r;let e={},i=this._cmdRef.schema;for(let n of Object.keys(i)){let m=Array.isArray(i[n])?i[n][0]:i[n];if((Array.isArray(i[n])&&(r=i[n][1])!=null?r:!1)&&!this._split.slice(this._splitPos).filter(d=>d.length).length)break;if(e[n]=m.extract(this),e[n]===void 0)return}return e}readNext(){return this._split[this._splitPos++]}readCurrent(){return this._split[this._splitPos+1]}_checkPermissions(){var e,i;if((i=(e=this._cmdRef)==null?void 0:e.permissionTags)==null?void 0:i.length){for(let r of this._cmdRef.permissionTags)if(!this._player.hasTag(r))return this.throwPermissionError()}}tryExecute(){if(!this._cmdRef)return this._throwInvalidCommand();this._checkPermissions();let e=this._buildArgs();if(!e)return;let i=!1;if(this._manager.getClient().emit("CommandUsed",{command:this._cmdRef,sender:this._player,args:e,cancel:()=>{i=!0}}),!i)try{this._cmdRef.call(this._player,e)}catch(r){let n=typeof r=="object"?r:new Error(r);throw{message:String(n.message),stack:String(n.stack),name:String(n.name),user:!0}}}throwPermissionError(){throw new Error("You do not have sufficient permissions to use this command!")}generateUsage(){var r,n,m,u;if((r=this._cmdRef)==null?void 0:r.usage)return this._cmdRef.usage;let i=Object.keys((m=(n=this._cmdRef)==null?void 0:n.schema)!=null?m:{}).map(d=>{var st;let y=this._cmdRef.schema[d],f=Array.isArray(y)?y[0]:y,g=Array.isArray(y)&&(st=y[1])!=null?st:!1,_=g?"[":"<",$e=g?"]":">";return`${_}${d}: ${f.displayName}${$e}`}).join(" ");return`${this._manager.getPrefix()}${(u=this._cmdRef)==null?void 0:u.name} ${i}`}throwSyntaxError(e){let i=Array(this._getIndex()).fill("").join(" ");throw new Error(`${this.generateUsage()}
 --> Invalid usage at 0:${this._getIndex()}
  |
  | ${this.execString}
  | ${i}^ ${e}
  |`)}};import{BlockLocation as et,world as Ei,Location as Ft}from"mojang-minecraft";var tt=class{constructor(e){t(this,"_client");this._client=e}sendMessage(e){this._client.executeCommand(`tellraw @a {"rawtext":[{"text":"${e.replace(/"/g,'\\"')}"}]}`)}getEntitiesFromLocation(e,i){return Array.from(this._client.entities.getAll().values()).filter(r=>r.getLocation()===i&&r.getDimensionName()===e)}getPlayersFromLocation(e,i){return Array.from(this._client.players.getAll().values()).filter(r=>r.getLocation()===i&&r.getDimensionName()===e)}spawnEntity(e,i,r){let n=this.getDimension(r).spawnEntity(e,new et(i.x,i.y,i.z));return this._client.entities.getByIEntity(n)}spawnItem(e,i,r){let n=this.getDimension(r).spawnItem(e,new et(i.x,i.y,i.z));return this._client.entities.getByIEntity(n)}spawnParticle(e,i,r,n){this.getDimension(r).spawnParticle(e,new Ft(i.x,i.y,i.z),n)}setBlockPermutation(e,i,r){let n=this.getBlock(e,i);return n.setPermutation(r),n}getBlock(e,i){return new h(this._client,this.getDimension(i).getBlock(new et(e.x,e.y,e.z)))}getDimension(e){return Ei.getDimension(e)}getTime(){let e=this._client.executeCommand("time query daytime");return e.err?0:parseInt(e.statusMessage.split(" ")[2],10)}setTime(e){return!this._client.executeCommand(`time set ${e}`).err}getWeather(){let e=this._client.executeCommand("weather query");return e.err?"clear":e.statusMessage.split(" ")[3]}setWeather(e){return!this._client.executeCommand(`weather ${e}`).err}setDifficulty(e){return!this._client.executeCommand(`difficulty ${e}`).err}createExplosion(e,i,r,n){this.getDimension(r).createExplosion(new Ft(e.x,e.y,e.z),i,n)}};var it=class{constructor(e){t(this,"_client");this._client=e}createObjective(e){var r,n;return!(this.getObjectives().find(m=>m.id===e.id)||this._client.executeCommand(`scoreboard objectives add ${e.id} ${(r=e.type)!=null?r:"dummy"} "${(n=e.display)!=null?n:e.id}"`).err)}removeObjective(e){return!(!this.getObjectives().find(r=>r.id===e)||this._client.executeCommand(`scoreboard objectives remove ${e}`).err)}getObjectives(){let e=[],i=this._client.executeCommand("scoreboard objectives list");if(i.err)return e;let r=i.statusMessage.split(`
`);for(let n of r){if(!n.startsWith("-"))continue;let m=n.split(" "),u=m[1].slice(0,m[1].length-1),d=n.match(/'([^']+)'/)[0].replace(/'/g,""),y=n.match(/type '([^']+)'/)[0].replace(/'/g,"").replace("type ","");e.push({id:u,display:d,type:y})}return e}setDisplay(e,i){return!this._client.executeCommand(`scoreboard objectives setdisplay ${i} ${e.id}`).err}};var jt="2.4.0";var Ot=jt,zt="1.18.30",Ht=503;var rt=class extends Fe{constructor(e={}){super();t(this,"_events",new Map);t(this,"_options");t(this,"players",new Xe(this));t(this,"entities",new qe(this));t(this,"commands",new Ze(this));t(this,"world",new tt(this));t(this,"scoreboards",new it(this));t(this,"currentVersion",Ot);t(this,"currentMCBE",zt);t(this,"currentProtocol",Ht);if(this._options=e,this._options.enableEvents)for(let i of Ye)this._options.enableEvents.includes(i.prototype.name)&&(this._events.has(i.prototype.name)||this.loadEvent(i));else for(let i of Ye)this._events.has(i.prototype.name)||this.loadEvent(i);this._options.commandsDisabled&&this.commands.disable(),this._options.commandsPrefix&&this.commands.setPrefix(this._options.commandsPrefix)}deprecated(e){return console.warn(`[BeAPI]: Event "${e}" appears be deprecated, skipping registration. Please report this issue here: https://github.com/MCBE-Utilities/BeAPI/issues`)}loadEvent(e){let i=new e(this);if(!this.verifyIEvent(i.iName))return this.deprecated(i.iName);this._events.set(i.name,i),i.on()}removeEvent(e){let i=this._events.get(e);this._events.delete(e)&&(i==null||i.off())}getEvent(e){return this._events.get(e)}verifyIEvent(e){return e==="custom"?!0:Object.keys(Ut.prototype).includes(e)}getAllIEvents(){return Object.keys(Ut.prototype)}executeCommand(e,i="overworld",r=!1){try{let n=Ii.getDimension(i).runCommand(e);return{statusMessage:n.statusMessage,data:n,err:!1}}catch(n){return r&&console.info(`[executeCommand]: ${String(n)}`),{statusMessage:String(n),data:null,err:!0}}}};var nt=class{constructor(){t(this,"_runtimeId",0);t(this,"_intervals",new Map);t(this,"_timeouts",new Map);this._polyfillIntervals(),this._polyfillTimeouts()}start(e){e.on("Tick",()=>{this._intervals.forEach((i,r)=>{var n;if(isNaN((n=i.og)!=null?n:NaN))return this._intervals.delete(r);i.tick--,!(i.tick>0)&&(i.cb(),i.tick=i.og)})}),e.on("Tick",()=>{this._timeouts.forEach((i,r)=>{i.tick--,!(i.tick>0)&&(i.cb(),this._timeouts.delete(r))})})}_polyfillIntervals(){globalThis.setInterval=(e,i)=>{let r=this._runtimeId++;return this._intervals.set(r,{cb:e,tick:i,og:i}),r},globalThis.clearInterval=e=>{this._intervals.delete(e)}}_polyfillTimeouts(){globalThis.setTimeout=(e,i)=>{let r=this._runtimeId++;return this._timeouts.set(r,{cb:e,tick:i}),r},globalThis.clearTimeout=e=>{this._timeouts.delete(e)}}};var ke=console.warn;globalThis.console={log(l,...e){ke(`\xA79[BeAPI]\xA7r  \xA7b[LOG]:\xA7r ${l} ${e.join(" ")}`)},error(l,...e){ke(`\xA79[BeAPI]\xA7r  \xA7c[ERROR]:\xA7r ${l} ${e.join(" ")}`)},warn(l,...e){ke(`\xA79[BeAPI]\xA7r  \xA7g[WARN]:\xA7r ${l} ${e.join(" ")}`)},info(l,...e){ke(`\xA79[BeAPI]\xA7r  \xA7a[INFO]:\xA7r ${l} ${e.join(" ")}`)},debug(l,...e){ke(`\xA79[BeAPI]\xA7r  \xA7d[DEBUG]:\xA7r ${l} ${e.join(" ")}`)}};var Pi=new rt({enableEvents:["Tick"]}),Ti=new nt;Ti.start(Pi);function s(l){return(e,i)=>{e[i]=l}}var Me=class{constructor(e,i,r){t(this,"__model__");t(this,"__id__");t(this,"__knownData__");this.__id__=i,this.__model__=e,this.__knownData__=r,Object.assign(this,r)}retrieveKnownInternalData(){return Object.freeze(this.__knownData__)}asObject(){return Object.keys(this.__model__.schema.definition).map(e=>({[e]:this[e]})).reduce((e,i)=>E(E({},e),i),{})}getId(){return String(this.__id__)}delete(){this.__model__.delete(this.__id__)}save(){return this.__model__.sync(this.__id__),this.__knownData__=this.asObject(),this}};var C;(u=>{function l(d){var g;let{statusMessage:y,err:f}=v("scoreboard players list");return f?[]:((g=y.match(/<{\?name=\w+&id=\w+&bin=[01 ]+}>/gi))!=null?g:[]).map(_=>u.fromRaw(_)).filter(_=>_.name===d)}u.retrieveSerializedData=l;function e(){var f,g;let{err:d,statusMessage:y}=v("scoreboard objectives list");return d?[]:(g=(f=y.match(/- (\w*):/gi))==null?void 0:f.map(_=>_.replace(/- |:/g,"")))!=null?g:[]}u.retrieveObjectiveNames=e;function i(d){return u.retrieveObjectiveNames().includes(d)}u.tableExists=i;function r(d,y,f){return`<{?name=${d}&id=${y}&bin=${$t(f)}}>`}u.toRaw=r;function n(d){if(!/<{\?name=\w+&id=\w+&bin=[01 ]+}>/gi.test(d))throw new Error(`Not a valid collection! ${d}`);let y=new Map(d.replace(/<{\?|}>/g,"").split("&").map($e=>$e.split("="))),f=y.get("id"),g=y.get("name"),_=y.get("bin").trim();return{id:f,name:g,bin:_}}u.fromRaw=n;function m(d){return!/\W/.test(d)}u.validName=m})(C||(C={}));var wi=new Ke(1,16439399),Kt=class{constructor(e,i,r="BeAPI__DATABASE"){t(this,"schema");t(this,"scoreboardName");t(this,"name");t(this,"documents",new Map);if(!C.validName(r))throw Error("Invalid Scoreboard Name Format: Letters, Numbers, Underscores!");if(r.length>16)throw Error("Scoreboard Names May Not Exceed 16 Characters!");if(!C.validName(e))throw Error("Invalid Model Name Format: Letters, Numbers, Underscores!");if(this.schema=i,this.name=e,this.scoreboardName=r,!C.tableExists(r)){let n=v(`scoreboard objectives add "${r}" dummy`);if(n.err)throw new Error(n.statusMessage)}for(let n of C.retrieveSerializedData(this.name)){let m=this.schema.deserialize(Lt(n.bin));if(this.documents.set(n.id,new Me(this,n.id,m)),m.__documentNeedsMigrate__){delete m.__documentNeedsMigrate__;let u=C.toRaw(n.name,n.id,n.bin);v(`scoreboard players reset "${u}" "${this.scoreboardName}"`),this.sync(n.id)}}}asArray(){return Array.from(this.documents.values())}find(e){let i=Object.keys(e).filter(r=>r!=null);return this.asArray().find(r=>i.every(n=>r.asObject()[n]===e[n]))}findAll(e){let i=Object.keys(e).filter(r=>r!=null);return this.asArray().filter(r=>i.every(n=>r.asObject()[n]===e[n]))}write(e){let i=wi.generate(),r=new Me(this,i,e);return this.documents.set(i,r),r.save()}writeBulk(e){let i=[];for(let r of e)this.write(r);return i}deleteAll(){for(let e of this.documents.keys())this.delete(e)}delete(e){let i=this.documents.get(e);!i||(v(`scoreboard players reset "${C.toRaw(this.name,e,this.schema.serialize(i.retrieveKnownInternalData()))}" "${this.scoreboardName}"`),this.documents.delete(e))}sync(e){let i=this.documents.get(e);if(!i)return;v(`scoreboard players reset "${C.toRaw(this.name,e,this.schema.serialize(i.retrieveKnownInternalData()))}" "${this.scoreboardName}"`);let r=v(`scoreboard players add "${C.toRaw(this.name,e,this.schema.serialize(i.asObject()))}" "${this.scoreboardName}" 0`);if(r.err)throw new Error(r.statusMessage)}};function Km(l,e,i="BeAPI__DATABASE"){return new Kt(l,e,i)}var De=String,Le=Number,Wt=Boolean,Gt=Array,ot=Map,Se;(m=>{class l extends De{static serialize(d){if(typeof d!="string")throw Error(`Passed "${d}" To Serializer As Type [string] instead found [${typeof d}]! Refusing to continue...`);return De(d)}static deserialize(d){return De(d)}}m.String=l;class e extends Le{static serialize(d){if(typeof d!="number")throw Error(`Passed "${d}" To Serializer As Type [number] instead found [${typeof d}]! Refusing to continue...`);return Le(d)}static deserialize(d){return Le(d)}}m.Number=e;class i extends Wt{static serialize(d){if(typeof d!="boolean")throw Error(`Passed "${d}" To Serializer As Type [boolean] instead found [${typeof d}]! Refusing to continue...`);return Le(d?1:0)}static deserialize(d){return Wt(d===1)}}m.Boolean=i;class r extends Gt{static serialize(d){if(!r.isArray(d))throw Error(`Passed "${d}" To Serializer As Type [Array] instead found [${typeof d}]! Refusing to continue...`);return De(JSON.stringify(d))}static deserialize(d){return Gt(...JSON.parse(d))}}m.Array=r;class n extends ot{static serialize(d){if(!(d instanceof n)&&!(d instanceof ot))throw Error(`Passed "${d}" To Serializer As Type [Map] instead found [${typeof d}]! Refusing to continue...`);return JSON.stringify(r.from(d.entries()))}static deserialize(d){return new ot(JSON.parse(d))}}m.Map=n})(Se||(Se={}));var qt=[];for(let l in Se)l&&qt.push(Se[l]);function ki(l){for(let e of Object.keys(l)){let i=l[e];if(!qt.includes(i))return e}}var Jt=class{constructor(e){t(this,"definition");let i=ki(e);if(i)throw new Error(`Invalid SchemaType found on key "${i}" when creating schema!`);this.definition=e}serialize(e){for(let i of Object.keys(this.definition))if(e[i]===void 0||e[i]===null)throw Error(`Attempted to serialize data that is missing required property "${i}". Refusing to continue...`);return JSON.stringify(Ue(e).map(([i,r])=>{let n=this.definition[i];return n?{[i]:n.serialize(r)}:{}}).reduce((i,r)=>E(E({},i),r),{}))}deserialize(e){return Ue(JSON.parse(e)).map(([i,r])=>{let n=this.definition[i];return n?{[i]:n.deserialize(r)}:{__documentNeedsMigrate__:!0}}).reduce((i,r)=>E(E({},i),r),{})}};function Xm(l){return new Jt(l)}var Si=(u=>(u.forward="forward",u.back="back",u.up="up",u.down="down",u.left="left",u.right="right",u))(Si||{}),Ai=(i=>(i.left="left",i.right="right",i))(Ai||{});import*as Bi from"mojang-minecraft";import*as Ni from"mojang-gametest";export{p as AbstractEvent,He as ActionForm,Ne as Agent,Si as AgentDirection,Ai as AgentRotation,h as Block,je as BlockInventory,k as BlockType,rt as Client,Ve as CommandExecState,Ze as CommandManager,x as CommandTypes,Me as Document,Pe as Entity,w as EntityInventory,qe as EntityManager,Fe as EventEmitter,Ni as Gametest,b as Item,ze as MessageForm,Bi as Minecraft,Kt as Modal,Oe as ModalForm,S as Permutation,Te as Player,Xe as PlayerManager,Ke as SafeIds,Jt as Schema,Se as SchemaTypes,tt as WorldManager,Il as between,Lt as binToString,Rt as checkObjectForCommandTypes,Ml as destruct,Ue as entries,Ye as events,Dt as genUuid,El as getCoordinatesBetween,ut as getEnchantments,Be as getUniqueId,zt as mcbe,Km as modal,Ht as protocol,v as runCommand,Xm as schema,s as setProto,$t as stringToBin,vl as verifyUuid,Ot as version};
